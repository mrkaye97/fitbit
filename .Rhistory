PROJECT_ROOT <- find_root('fitbit.Rproj')
rm(list = ls())
library(tidyverse)
library(lubridate)
library(viridis)
library(ggthemes)
library(rprojroot)
library(DBI)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
rm(list = ls())
library(tidyverse)
library(lubridate)
library(viridis)
library(ggthemes)
library(rprojroot)
library(DBI)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
PROJECT_ROOT <- find_root('fitbit.Rproj')
con <- DBI::dbConnect(RMySQL::MySQL(),
host = "localhost",
port = 3306,
dbname = "fitbit",
user = "root",
password = keyring::key_get('mysql'))
activity <- tbl(con, 'basicactivity') %>%
data.frame() %>%
arrange(date)
water <- tbl(con, 'water') %>%
data.frame() %>%
arrange(date)
sleep <- tbl(con, 'sleep') %>%
data.frame() %>%
arrange(date)
df <- activity %>%
left_join(water, by = 'date') %>%
left_join(sleep, by = 'date')
df %>%
glimpse()
rm(list = ls())
library(tidyverse)
library(lubridate)
library(viridis)
library(ggthemes)
library(rprojroot)
library(DBI)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
PROJECT_ROOT <- find_root('fitbit.Rproj')
con <- DBI::dbConnect(RMySQL::MySQL(),
host = "localhost",
port = 3306,
dbname = "fitbit",
user = "root",
password = keyring::key_get('mysql'))
activity <- tbl(con, 'basicactivity') %>%
data.frame() %>%
arrange(date)
water <- tbl(con, 'water') %>%
data.frame() %>%
arrange(date)
sleep <- tbl(con, 'sleep') %>%
data.frame() %>%
arrange(date)
df <- activity %>%
left_join(water, by = 'date') %>%
left_join(sleep, by = 'date')
df %>%
glimpse()
df <- tbl(con, 'sleep') %>%
arrange(date) %>%
filter(mainSleep == 1) %>% # main sleep = no naps
collect() %>%
mutate(date = as_date(date),
startTime = as_datetime(startTime),
sh = ifelse(hour(startTime) < 8, hour(startTime) + 24, hour(startTime)), #create numeric times
sm = minute(startTime),
st = sh + sm/60,
eh = hour(endTime),
em = minute(endTime),
et = eh + em/60,
mst = ma(st, 7), #create moving averages
met = ma(et, 7),
year = year(startTime)
)
rm(list = ls())
library(tidyverse)
library(lubridate)
library(viridis)
library(ggthemes)
library(rprojroot)
library(DBI)
library(dbplyr)
library(scales)
library(forecast)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
PROJECT_ROOT <- find_root('fitbit.Rproj')
con <- DBI::dbConnect(RMySQL::MySQL(),
host = "localhost",
port = 3306,
dbname = "fitbit",
user = "root",
password = keyring::key_get('mysql'))
activity <- tbl(con, 'basicactivity') %>%
data.frame() %>%
arrange(date)
water <- tbl(con, 'water') %>%
data.frame() %>%
arrange(date)
sleep <- tbl(con, 'sleep') %>%
data.frame() %>%
arrange(date)
df <- activity %>%
left_join(water, by = 'date') %>%
left_join(sleep, by = 'date')
df %>%
glimpse()
df <- tbl(con, 'sleep') %>%
arrange(date) %>%
filter(mainSleep == 1) %>% # main sleep = no naps
collect() %>%
mutate(date = as_date(date),
startTime = as_datetime(startTime),
sh = ifelse(hour(startTime) < 8, hour(startTime) + 24, hour(startTime)), #create numeric times
sm = minute(startTime),
st = sh + sm/60,
eh = hour(endTime),
em = minute(endTime),
et = eh + em/60,
mst = ma(st, 7), #create moving averages
met = ma(et, 7),
year = year(startTime)
)
plt <- df %>%
ggplot(aes(x = date))+
geom_line(aes(y = et), color = 'coral', alpha = .3, na.rm = T)+
geom_line(aes(y = st), color = 'dodgerblue', alpha = .3, na.rm = T)+
geom_line(aes(y = met), color = 'coral', na.rm=T)+
geom_line(aes(y = mst), color = 'dodgerblue', na.rm=T)+
scale_y_continuous(breaks = seq(0, 30, 2),
labels = trans_format(function(x) ifelse(x > 23, x - 24, x),
format = scales::comma_format(suffix = ":00", accuracy = 1))
)+
labs(x = "Date",
y = 'Time')+
theme_fivethirtyeight()+
scale_x_date(date_breaks = '1 month', date_labels = '%b', expand = c(0, 0))+
facet_grid(. ~ year, space = 'free', scales = 'free_x', switch = 'x') +
theme(panel.spacing.x = unit(0,"line"),
strip.placement = "outside")
plt
rm(list = ls())
library(tidyverse)
library(lubridate)
library(viridis)
library(ggthemes)
library(rprojroot)
library(DBI)
library(dbplyr)
library(scales)
library(forecast)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
PROJECT_ROOT <- find_root('fitbit.Rproj')
con <- DBI::dbConnect(RMySQL::MySQL(),
host = "localhost",
port = 3306,
dbname = "fitbit",
user = "root",
password = keyring::key_get('mysql'))
activity <- tbl(con, 'basicactivity') %>%
data.frame() %>%
arrange(date)
water <- tbl(con, 'water') %>%
data.frame() %>%
arrange(date)
sleep <- tbl(con, 'sleep') %>%
data.frame() %>%
arrange(date)
df <- activity %>%
left_join(water, by = 'date') %>%
left_join(sleep, by = 'date')
df %>%
glimpse()
df <- tbl(con, 'sleep') %>%
arrange(date) %>%
filter(mainSleep == 1) %>% # main sleep = no naps
collect() %>%
mutate(date = as_date(date),
startTime = as_datetime(startTime),
sh = ifelse(hour(startTime) < 8, hour(startTime) + 24, hour(startTime)), #create numeric times
sm = minute(startTime),
st = sh + sm/60,
eh = hour(endTime),
em = minute(endTime),
et = eh + em/60,
mst = ma(st, 7), #create moving averages
met = ma(et, 7),
year = year(startTime)
)
plt <- df %>%
ggplot(aes(x = date))+
geom_line(aes(y = et), color = 'coral', alpha = .3, na.rm = T)+
geom_line(aes(y = st), color = 'dodgerblue', alpha = .3, na.rm = T)+
geom_line(aes(y = met), color = 'coral', na.rm=T)+
geom_line(aes(y = mst), color = 'dodgerblue', na.rm=T)+
scale_y_continuous(breaks = seq(0, 30, 2),
labels = trans_format(function(x) ifelse(x > 23, x - 24, x),
format = scales::comma_format(suffix = ":00", accuracy = 1))
)+
labs(x = "Date",
y = 'Time')+
theme_fivethirtyeight()+
scale_x_date(date_breaks = '1 month', date_labels = '%b', expand = c(0, 0))+
facet_grid(. ~ year, space = 'free', scales = 'free_x', switch = 'x') +
theme(panel.spacing.x = unit(0,"line"),
strip.placement = "outside")
plt
rm(list = ls())
library(tidyverse)
library(lubridate)
library(viridis)
library(ggthemes)
library(rprojroot)
library(DBI)
library(dbplyr)
library(scales)
library(forecast)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
PROJECT_ROOT <- find_root('fitbit.Rproj')
con <- DBI::dbConnect(RMySQL::MySQL(),
host = "localhost",
port = 3306,
dbname = "fitbit",
user = "root",
password = keyring::key_get('mysql'))
activity <- tbl(con, 'basicactivity') %>%
data.frame() %>%
arrange(date)
water <- tbl(con, 'water') %>%
data.frame() %>%
arrange(date)
sleep <- tbl(con, 'sleep') %>%
data.frame() %>%
arrange(date)
df <- activity %>%
left_join(water, by = 'date') %>%
left_join(sleep, by = 'date')
df %>%
glimpse()
df <- tbl(con, 'sleep') %>%
arrange(date) %>%
filter(mainSleep == 1) %>% # main sleep = no naps
collect() %>%
mutate(date = as_date(date),
startTime = as_datetime(startTime),
sh = ifelse(hour(startTime) < 8, hour(startTime) + 24, hour(startTime)), #create numeric times
sm = minute(startTime),
st = sh + sm/60,
eh = hour(endTime),
em = minute(endTime),
et = eh + em/60,
mst = ma(st, 7), #create moving averages
met = ma(et, 7),
year = year(startTime)
)
plt <- df %>%
ggplot(aes(x = date))+
geom_line(aes(y = et), color = 'coral', alpha = .3, na.rm = T)+
geom_line(aes(y = st), color = 'dodgerblue', alpha = .3, na.rm = T)+
geom_line(aes(y = met), color = 'coral', na.rm=T)+
geom_line(aes(y = mst), color = 'dodgerblue', na.rm=T)+
scale_y_continuous(breaks = seq(0, 30, 2),
labels = trans_format(function(x) ifelse(x > 23, x - 24, x),
format = scales::comma_format(suffix = ":00", accuracy = 1))
)+
labs(x = "Date",
y = 'Time')+
theme_fivethirtyeight()+
scale_x_date(date_breaks = '1 month', date_labels = '%b', expand = c(0, 0))+
facet_grid(. ~ year, space = 'free', scales = 'free_x', switch = 'x') +
theme(panel.spacing.x = unit(0,"line"),
strip.placement = "outside")
plt
rm(list = ls())
library(tidyverse)
library(lubridate)
library(viridis)
library(ggthemes)
library(rprojroot)
library(DBI)
library(dbplyr)
library(scales)
library(forecast)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
PROJECT_ROOT <- find_root('fitbit.Rproj')
con <- DBI::dbConnect(RMySQL::MySQL(),
host = "localhost",
port = 3306,
dbname = "fitbit",
user = "root",
password = keyring::key_get('mysql'))
activity <- tbl(con, 'basicactivity') %>%
data.frame() %>%
arrange(date)
water <- tbl(con, 'water') %>%
data.frame() %>%
arrange(date)
sleep <- tbl(con, 'sleep') %>%
data.frame() %>%
arrange(date)
df <- activity %>%
left_join(water, by = 'date') %>%
left_join(sleep, by = 'date')
df %>%
glimpse()
df <- tbl(con, 'sleep') %>%
arrange(date) %>%
filter(mainSleep == 1) %>% # main sleep = no naps
collect() %>%
mutate(date = as_date(date),
startTime = as_datetime(startTime),
sh = ifelse(hour(startTime) < 8, hour(startTime) + 24, hour(startTime)), #create numeric times
sm = minute(startTime),
st = sh + sm/60,
eh = hour(endTime),
em = minute(endTime),
et = eh + em/60,
mst = ma(st, 7), #create moving averages
met = ma(et, 7),
year = year(startTime)
)
plt <- df %>%
ggplot(aes(x = date))+
geom_line(aes(y = et), color = 'coral', alpha = .3, na.rm = T)+
geom_line(aes(y = st), color = 'dodgerblue', alpha = .3, na.rm = T)+
geom_line(aes(y = met), color = 'coral', na.rm=T)+
geom_line(aes(y = mst), color = 'dodgerblue', na.rm=T)+
scale_y_continuous(breaks = seq(0, 30, 2),
labels = trans_format(function(x) ifelse(x > 23, x - 24, x),
format = scales::comma_format(suffix = ":00", accuracy = 1))
)+
labs(x = "Date",
y = 'Time')+
theme_fivethirtyeight()+
scale_x_date(date_breaks = '1 month', date_labels = '%b', expand = c(0, 0))+
facet_grid(. ~ year, space = 'free', scales = 'free_x', switch = 'x') +
theme(panel.spacing.x = unit(0,"line"),
strip.placement = "outside")
plt
rm(list = ls())
library(tidyverse)
library(lubridate)
library(viridis)
library(ggthemes)
library(rprojroot)
library(DBI)
library(dbplyr)
library(scales)
library(forecast)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
PROJECT_ROOT <- find_root('fitbit.Rproj')
con <- DBI::dbConnect(RMySQL::MySQL(),
host = "localhost",
port = 3306,
dbname = "fitbit",
user = "root",
password = keyring::key_get('mysql'))
activity <- tbl(con, 'basicactivity') %>%
data.frame() %>%
arrange(date)
water <- tbl(con, 'water') %>%
data.frame() %>%
arrange(date)
sleep <- tbl(con, 'sleep') %>%
data.frame() %>%
arrange(date)
df <- activity %>%
left_join(water, by = 'date') %>%
left_join(sleep, by = 'date')
df %>%
glimpse()
df <- tbl(con, 'sleep') %>%
arrange(date) %>%
filter(mainSleep == 1) %>% # main sleep = no naps
collect() %>%
mutate(date = as_date(date),
startTime = as_datetime(startTime),
sh = ifelse(hour(startTime) < 8, hour(startTime) + 24, hour(startTime)), #create numeric times
sm = minute(startTime),
st = sh + sm/60,
eh = hour(endTime),
em = minute(endTime),
et = eh + em/60,
mst = ma(st, 7), #create moving averages
met = ma(et, 7),
year = year(startTime)
)
plt <- df %>%
ggplot(aes(x = date))+
geom_line(aes(y = et), color = 'coral', alpha = .3, na.rm = T)+
geom_line(aes(y = st), color = 'dodgerblue', alpha = .3, na.rm = T)+
geom_line(aes(y = met), color = 'coral', na.rm=T)+
geom_line(aes(y = mst), color = 'dodgerblue', na.rm=T)+
scale_y_continuous(breaks = seq(0, 30, 2),
labels = trans_format(function(x) ifelse(x > 23, x - 24, x),
format = scales::comma_format(suffix = ":00", accuracy = 1))
)+
labs(x = "Date",
y = 'Time')+
theme_fivethirtyeight()+
scale_x_date(date_breaks = '1 month', date_labels = '%b', expand = c(0, 0))+
facet_grid(. ~ year, space = 'free', scales = 'free_x', switch = 'x') +
theme(panel.spacing.x = unit(0,"line"),
strip.placement = "outside")
plt
install.packages('prettydoc')
knitr::opts_chunk$set(message = F, warning = F, tidy = T)
library(tidyverse)
library(dbplyr)
library(lubridate)
library(scales)
library(ggthemes)
library(forecast)
con <- DBI::dbConnect(RMySQL::MySQL(),
host = "localhost",
port = 3306,
dbname = "fitbit",
user = "root",
password = keyring::key_get('mysql'))
activity <- tbl(con, 'basicactivity') %>%
data.frame() %>%
arrange(date)
water <- tbl(con, 'water') %>%
data.frame() %>%
arrange(date)
sleep <- tbl(con, 'sleep') %>%
data.frame() %>%
arrange(date)
df <- activity %>%
left_join(water, by = 'date') %>%
left_join(sleep, by = 'date')
df %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = sedentaryMinutes, y = awakenings))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = sedentaryMinutes, y = efficiency))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(efficiency > 50)
df %>%
filter(efficiency > 50) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = sedentaryMinutes, y = efficiency))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(efficiency > 50) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = steps, y = efficiency))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(efficiency > 50) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = water, y = efficiency))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(efficiency > 50, water > 0) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = water, y = efficiency))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(efficiency > 50, water > 0) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = water, y = minutesAsleep))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(efficiency > 50, water > 0) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = steps, y = minutesAsleep))+
geom_point()+
geom_smooth(method = 'lm', se = F)
View(df)
df %>%
filter(efficiency > 50, water > 0) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = steps, y = caloriesOut))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(efficiency > 50, water > 0) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = steps, y = water))+
geom_point()+
geom_smooth(method = 'lm', se = F)
df %>%
filter(efficiency > 50, water > 0) %>%
filter(mainSleep == '1') %>%
ggplot(aes(x = steps, y = restlessDuration))+
geom_point()+
geom_smooth(method = 'lm', se = F)
